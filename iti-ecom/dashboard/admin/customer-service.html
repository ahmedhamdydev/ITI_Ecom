<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />

    <meta
      name="viewport"
      content="height=device-height, 
                      width=device-width, initial-scale=1.0, 
                      minimum-scale=1.0, maximum-scale=1.0, 
                      user-scalable=no"
    />

    <title>admin Dashboard</title>

    <link
      rel="stylesheet"
      type="text/css"
      href="../assets/css/bootstrap.min.css"
    />

    <link
      rel="stylesheet"
      type="text/css"
      href="../assets/css/fontAwesome.css"
    />

    <link rel="stylesheet" type="text/css" href="../assets/css/main.css" />
  </head>

  <body>
    <div class="root-wrapper">
      <aside class="sidebar">
        <div class="slidebar-content">
          <a class="logoBox" href="#"> Our E-com</a>
          <ul class="sidebar-list">
            <li>
              <a href="index.html">
                <i class="fa-solid fa-house"></i>
                home
              </a>
            </li>
            <li>
              <a href="users.html">
                <i class="fa-solid fa-house"></i>
                users
              </a>
            </li>
            <li>
              <a href="products.html">
                <i class="fa-solid fa-list"></i>
                products
              </a>
            </li>
            <li>
              <a href="orders.html">
                <i class="fa-solid fa-cart-shopping"></i>
                orders
              </a>
            </li>
            <li>
              <a href="sales.html">
                <i class="fa-solid fa-chart-line"></i>
                sales
              </a>
            </li>
            <li>
              <a class="active" href="customer-service.html">
                <i class="fa-solid fa-headset"></i>
                customer service
              </a>
            </li>
          </ul>
        </div>
        <a class="logout-link" href="#">
          <i class="fa-solid fa-arrow-right-from-bracket"></i>
          logout
        </a>
        <div class="close-sidebar" id="sidebar-close">
          <i class="fas fa-times"></i>
        </div>
      </aside>
      <main class="page-wrapper">
        <nav class="top-nav">
          <div class="container-fluid w-100 h-100">
            <div class="nav-content">
              <div class="nav-menu">
                <button class="btn open-sidebar" id="sidebar-open">
                  <i class="fa-solid fa-bars"></i>
                </button>
              </div>
              <div class="nav-actions">
                <a class="account-btn" href="#" aria-expanded="false">
                  <img
                    src="../assets/img/avatar.png"
                    class="admin-avatar ml-4"
                  />
                  <span class="user-name" id="userName"> </span>
                </a>
              </div>
            </div>
          </div>
        </nav>

        <section class="section-style support-section">
          <div class="container-fluid">
            <h1 class="main-title">customer service</h1>
            <div class="table-responsive">
              <table class="table table-hover border">
                <thead class="bg-light">
                  <tr>
                    <th>name</th>
                    <th>email</th>
                    <th>phone</th>
                    <th>massage</th>
                  </tr>
                </thead>
                <tbody id="support_table_body"></tbody>
              </table>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- jquery 3.5.1   -->
    <script src="../assets/js/jquery-3.5.1.min.js"></script>

    <!-- bootstrap v5   -->
    <script src="../assets/js/bootstrap.bundle.min.js"></script>

    <!-- main style js   -->
    <script src="../assets/js/main.js"></script>

    <!-- adminAuth script   -->
    <script src="../assets/js/scripts/adminAuth.js"></script>

    <script>
      const messagesList =
        JSON.parse(localStorage.getItem("messagesList")) || [];
      const supportTableBody = document.getElementById("support_table_body");
      const renderTable = () => {
        supportTableBody.innerHTML = "";

        if (messagesList.length === 0) {
          const tr = document.createElement("tr");
          tr.innerHTML = `
                  <td colspan="4" class="text-center">No messages found</td>
                `;
          supportTableBody.appendChild(tr);
          return;
        }

        messagesList.forEach((el) => {
          const row = document.createElement("tr");

          row.innerHTML = `
                          <td>${el.name}</td>
                          <td>${el.email}</td>
                          <td>${el.phone}</td>
                          <td>${el.message}</td>      
                        `;

          supportTableBody.appendChild(row);
        });
      };

      document.addEventListener("DOMContentLoaded", () => {
        renderTable();
      });


    </script>
  </body>
</html>
